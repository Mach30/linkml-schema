Options +FollowSymLinks
RewriteEngine on

RewriteRule ^(.*)\.yaml$ model/schema/$1.yaml
RewriteRule ^(.*)\.graphql$ graphql/$1.graphql
RewriteRule ^(.*)\.context.json$ jsonld/$1.context.json
RewriteRule ^(.*)\.context.jsonld$ jsonld/$1.context.jsonld
RewriteRule ^(.*)\.schema.json$ jsonschema/$1.schema.json
RewriteRule ^(.*)\.json$ json/$1.json
RewriteRule ^(.*)\.owl$ owl/$1.owl.ttl
RewriteRule ^(.*)\.owl.ttl$ owl/$1.owl.ttl
RewriteRule ^(.*)\.rdf$ rdf/$1.ttl
RewriteRule ^(.*)\.shex$ shex/$1.shex
RewriteRule ^(.*)\.shexc$ shex/$1.shex
RewriteRule ^(.*)\.shexj$ shex/$1.shexj
RewriteRule ^(.*)$ model/schema/$1.yaml

# Poor man's conneg
# ------------------------------------
RewriteCond %{HTTP_ACCEPT} ^text/turtle
RewriteRule ^(.*/)([^./]+)$ $1$2.ttl [L]

RewriteCond %{HTTP_ACCEPT} ^text/yaml
RewriteRule ^(.*/)([^./]+)$ $1$2.yaml [L]

RewriteCond %{HTTP_ACCEPT} ^application/json
RewriteRule ^(.*/)([^./]+)$ $1$2.json [L]

RewriteCond %{HTTP_ACCEPT} ^text/shex
RewriteRule ^(.*/)([^./]+)$ $1$2.shex [L]

# RewriteCond %{HTTP_ACCEPT} ^text/html
# RewriteRule ^(.*/)[^./]+)$ $1$2.html [L]

# RewriteCond %{HTTP_ACCEPT} ^text/html
# RewriteRule ^(meta)$ meta.html [L]


# Rewrite Base URL
RewriteRule ^(.*)$ https://linkml.github.io/linkml/$1 [R=302,L]

